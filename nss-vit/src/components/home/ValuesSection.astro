---
/**
 * ╻ NSS-VIT
 * ┃ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 * ┃ Not Me, But You
 * ┃
 * ┃ ValuesSection.astro
 * ╹ src/components/home/
 */
import { sanityClient } from 'sanity:client';
import HomeTabs from './HomeTabs';

// Define types
interface TabItem {
  title: string;
  description: string;
}

interface AboutContent {
  valuesTitle?: string;
  values?: TabItem[];
  objectives?: TabItem[];
  goals?: TabItem[];
}

// Fetch values content from Sanity aboutContent singleton
const aboutContent: AboutContent = await sanityClient.fetch(`
  *[_type == "aboutContent"][0] {
    valuesTitle,
    values[] {
      title,
      description
    },
    objectives[] {
      title,
      description
    },
    goals[] {
      title,
      description
    }
  }
`) || {};

// Prepare tab data for HomeTabs component
const tabData = {
  values: aboutContent?.values || [],
  objectives: aboutContent?.objectives || [],
  goals: aboutContent?.goals || [],
};

const sectionTitle = aboutContent?.valuesTitle || 'VALUES & GOALS';
---

<section class="max-w-[1400px] mx-auto px-6 sm:px-8 lg:px-10 py-10 md:py-12 border-t border-swiss-gray-200">
  <div class="mb-6">
    <span class="text-label text-primary mb-2 block">Principles</span>
    <h2 class="text-headline text-text">{sectionTitle}</h2>
  </div>
  <HomeTabs client:load tabData={tabData} />
</section>
